<!DOCTYPE html>
<html 
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" 
	layout:decorate="~{layout/layout.html}">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	<main layout:fragment="content">
        <div class="mt-3">
            <a class="btn mr-3 mb-3" th:each="item : ${communities}" th:classappend="${item.co_num} ? 'btn-info' : 'btn-outline-info'" th:text="${item.co_name}" th:href="@{/member/mypage/postList/{co_num}(co_num=${item.co_num})}">강아지</a>
        </div>
        <div id="postList" style="display: none; width: 100%;">
	        <table id="dataTable" style="display: none; width: 100%;" class="post">
	            <thead>
	                <tr>
	                    <th>번호</th>
	                    <th>제목</th>
	                    <th>작성자</th>
	                    <th>작성일</th>
	                    <th>추천수</th>
	                    <th>조회수</th>
	                </tr>
	            </thead>
	            <tbody>
	                <!-- 데이터가 있을 경우 렌더링 -->
	                <tr th:each="post : ${list}">
	                    <td th:text="${post.po_num}"></td> <!-- 번호 -->
	                    <td>
	                        <a th:if="${post.po_delete == 1}">
	                            <span class="text-muted">이 글은 삭제된 글입니다.</span>
	                        </a>
	                        <a th:if="${post.po_delete == 0}" th:text="${post.po_title}" th:href="@{/post/detail/{po_num}(po_num=${post.po_num})}"></a>
	                    </td>
	                    <td th:text="${post.po_me_num}"></td> <!-- 작성자 -->
	                    <td th:text="${post.po_date}"></td> <!-- 작성일 -->
	                    <td th:text="${post.recommendCount} + ' / ' + ${post.notRecommendCount}"></td> <!-- 추천수 / 비추천수 -->
	                    <td th:text="${post.po_viewCount}"></td> <!-- 조회수 -->
	                </tr>
	            </tbody>
	        </table>
	        <table class="table table-striped gatPost" style="display: none">
				<thead>
					<tr>
						<th>번호</th>
						<th>제목</th>
						<th>작성자</th>
						<th>타입</th>
						<th>상태</th>
						<th>조회수</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="item : ${gatPostlist}">
						<td th:text="${item.po_num}"></td>
						<td>
							<a th:text="${item.po_title}" th:href="@{/gatpost/detail/{po_num}(po_num=${item.po_num})}"></a>
						</td>
						<td th:text="${item.me_id}"></td>
						<td th:text="${item.gat_gatt_type}"></td>
						<td th:text="${item.gat_gats_state}"></td>
						<td th:text="${item.po_viewCount}"></td>
					</tr>
					<tr th:if="${list.size() == 0}">
						<td colspan="6" class="text-center">등록된 게시글이 없습니다</td>
					</tr>
				</tbody>
			</table>
			<table class="table table-striped maketPost">
	    	<thead>
				<tr>
					<th>번호</th>
					<th>제목</th>
					<th>썸네일</th>
					<th>판매내용</th>
					<th>금액</th>
					<th>아이디</th>
				</tr>
			</thead>
			<tbody>
				<tr th:each="item : ${maketList}" th:classappend="${item.mp_gts_state == '판매완료'} ? 'blur'">
					<td th:text="${item.po_num}"></td>
					
					<td>
						<a th:if="${item.mp_gts_state != '판매완료'}"
							th:href="@{/post/marketdetail/{po_num}(po_num=${item.po_num})}" 
							th:text="${item.po_title}"></a>
						<span th:if="${item.mp_gts_state == '판매완료'}" th:text="${item.po_title}"></span>
						<div>
							<div class="overlay" th:if="${item.mp_gts_state == '판매완료'}">판매 완료</div>
						</div>
					</td>
					 <td>
					    <img class="thumbnail" 
					         th:src="${item.mp_imgUrl != null && !item.mp_imgUrl.isEmpty() ? item.mp_imgUrl : '/image/image.jpg'}" 
					         alt="Thumbnail" style="width: 100px; height: auto; margin-right: 5px;"/>
					</td>
					
					<td th:text="${item.po_content}"></td>
					<td th:text="${item.mp_price}"></td>
					<td th:text="${item.me_id}"></td>
				</tr>				
			
				<tr th:if="${list.size() == 0}">
					<td colspan="4" class="text-center">등록된 게시글이 없습니다.</td>
				</tr>
			</tbody>
    	</table>
    	<table class="table table-striped walkmatePost">
				<thead>
					<tr>
						<th>번호</th>
						<th>제목</th>
						<th>작성자</th>
						<th>조회수</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="item : ${walklist}">
						<td th:text="${item.po_num}"></td>
						<td>
							<a th:text="${item.po_title}"
							th:href="@{/walkmatepost/detail/{po_num}(po_num=${item.po_num})}"></a> 
						</td>
						<td th:text="${item.me_id}"></td>
						<td th:text="0">조회수 구현 하려고 하고 있음</td>
					</tr>
				</tbody>
			</table>
        </div>
        <script type="text/javascript">
	        
		    var url = window.location.pathname;
		    if (url != '/member/mypage/postList/0') {
				$('#postList').show();
			}
		    if (url != '/member/mypage/postList/10' && url != '/member/mypage/postList/11' && url != '/member/mypage/postList/12' && url != '/member/mypage/postList/13') {
				$('.post').show();
				$('.walkmatePost').hide();
				$('.gatPost').hide();
				$('.maketPost').hide();
			}
		    if (url == '/member/mypage/postList/10') {
				$('.post').hide();
				$('.walkmatePost').show();
				$('.gatPost').hide();
				$('.maketPost').hide();
			}
		    if (url == '/member/mypage/postList/11') {
				$('.post').hide();
				$('.walkmatePost').hide();
				$('.gatPost').show();
				$('.maketPost').hide();
			}
		    if (url == '/member/mypage/postList/12') {
				$('.post').hide();
				$('.walkmatePost').hide();
				$('.gatPost').hide();
				$('.maketPost').show();
			}
	    </script>
    </main>
</body>
</html>
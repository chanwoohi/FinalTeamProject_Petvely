<!DOCTYPE html>
<html 
    xmlns:th="http://www.thymeleaf.org"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" 
    layout:decorate="~{layout/layout.html}">
<head>
    <style>        
        .blur {
            filter: blur(1px);
            pointer-events: none; 
            opacity: 0.5;
        }
        
        .overlay {
            position: absolute; 
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex; 
            justify-content: center; 
            align-items: center;
            color: #ff0000; 
            font-size: 24px; 
        }
    </style>
</head>
<body>
    <main layout:fragment="content">
        <table class="table table-striped">
        
            <thead>
                <tr>
                    <th>번호</th>
                    <th>제목</th>
                    <th>썸네일</th>
                    <th>판매내용</th>
                    <th>금액</th>
                    <th>아이디</th>

                </tr>
            </thead>
            <tbody>
            
                <tr th:each="item : ${list}" th:classappend="${item.mp_gts_state == '판매완료'} ? 'blur'">
                    <td th:text="${item.po_num}"></td>
                    
                    <td>
                        <a th:if="${item.mp_gts_state != '판매완료'}"
                           th:href="@{/post/marketdetail/{po_num}(po_num=${item.po_num})}" 
                           th:text="${item.po_title}"></a>
                        <span th:if="${item.mp_gts_state == '판매완료'}" th:text="${item.po_title}"></span>
                        <div>
                            <div class="overlay" th:if="${item.mp_gts_state == '판매완료'}">판매 완료</div>
                        </div>
                    </td>
                    
                    <td>
                        <img class="thumbnail" 
                             th:src="${item.mp_imgUrl != null && !item.mp_imgUrl.isEmpty() ? item.mp_imgUrl : '/image/image.jpg'}" 
                             alt="Thumbnail" style="width: 100px; height: auto; margin-right: 5px;"/>
                    </td>
                    
                    <td th:text="${item.po_content}"></td>
                    <td th:text="${item.mp_price}"></td>
                    <td th:text="${item.me_id}"></td>
                   	<td>
					    <a th:href="@{/message/marketmessagesend/{po_num}(po_num=${item.po_num})}">쪽지 보내기</a>
					</td>
					<td th:text="${item.me_id}"></td>
                </tr>
                
                <tr th:if="${list.size() == 0}">
                    <td colspan="6" class="text-center">등록된 게시글이 없습니다.</td>
                </tr>
            </tbody>
        </table>
        
        <a th:href="@{/post/marketinsert}" class="btn btn-outline-dark col-12">게시글 등록</a>
    </main>
</body>
</html>
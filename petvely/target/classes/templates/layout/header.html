<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
    <header th:fragment="header">
    
		<nav class="navbar navbar-expand-md bg-dark navbar-dark">
			<a class="navbar-brand" href="/">Home</a>
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse d-flex justify-content-between" id="collapsibleNavbar">
				<ul class="navbar-nav">
					<li class="nav-item">
						<a class="nav-link" th:href="@{/post/list/1}">게시판</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" th:href="@{/walkmatepost/list}">산책메이트</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" th:href="@{/gatpost/list}">품앗이 리스트</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" th:href="@{/post/market}">중고거래</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" th:href="@{/bookmark/list/1}">즐겨찾기</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" th:href="@{/message/messagebox/0}">쪽지함</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" 
							th:href="@{/member/signup}" sec:authorize="isAnonymous()">회원가입</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" 
							th:href="@{/member/login}" sec:authorize="isAnonymous()">로그인</a>
					</li>
					<li class="nav-item">
						<form name="logoutForm" 
							th:action="@{/member/logout}" sec:authorize="isAuthenticated()">
							<a class="nav-link" 
								type="submit" onclick="javascript:logoutForm.submit();">로그아웃</a>
						</form>
					</li>
					<li class="nav-item">
						<img class="profile-icon" th:src="@{/image/profile.png}" alt="Profile" id="profileIcon">
						<div class="profile-popup" id="profilePopup">
							<div class="popup-item">프로필 보기</div>
							<div class="popup-item">설정</div>
							<div class="popup-item">로그아웃</div>
						</div>
					</li>
       		 	</ul>
			</div>  
		</nav>
    </header>

    <script>
        const profileIcon = document.getElementById('profileIcon');
        const profilePopup = document.getElementById('profilePopup');

        profileIcon.addEventListener('click', () => {
            profilePopup.classList.toggle('open');
        });

        window.addEventListener('click', (event) => {
            if (!profileIcon.contains(event.target) && !profilePopup.contains(event.target)) {
                profilePopup.classList.remove('open');
            }
        });
    </script>
